{"ast":null,"code":"var _jsxFileName = \"/Users/sayconfirmproductionsltd/Documents/GitHub/react-twitter-clone/frontend/src/pages/Login.js\";\nimport React, { useState, useRef } from 'react';\nimport axios from 'axios';\nexport default function Login(props) {\n  const url = \"http://localhost:5000/login\";\n  const signal = useRef(axios.CancelToken.source());\n  let [account, setAccount] = useState({\n    username: '',\n    password: ''\n  });\n  const [errors, setErrors] = useState(null);\n\n  let handleChange = e => {\n    let name = e.target.name;\n    let value = e.target.value;\n    account[name] = value;\n    setAccount({ ...account,\n      account\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    let {\n      username,\n      password\n    } = account;\n    console.log(username, password);\n\n    try {\n      const res = await axios.post(url, {\n        username,\n        password\n      }, {\n        cancelToken: signal.current.token\n      });\n      console.log(res);\n\n      if (!res.status) {\n        console.log(res.message);\n        setErrors(res.message);\n        return;\n      }\n\n      console.log(props);\n      props.history.push('/');\n    } catch (err) {\n      if (axios.isCancel(e)) {\n        console.log('Get request canceled');\n      } else {\n        console.log(err);\n      }\n    }\n\n    signal.current.cancel('Operation canceled by the user.');\n    setAccount({ ...account,\n      username: '',\n      password: ''\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"home col-sm-10 col-md-10 col-lg-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: e => {\n      handleSubmit(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"username\",\n    value: account.username,\n    onChange: handleChange,\n    placeholder: \"username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"password\",\n    value: account.password,\n    onChange: handleChange,\n    placeholder: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, errors), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }\n  }, \"Sign in\")));\n}","map":{"version":3,"sources":["/Users/sayconfirmproductionsltd/Documents/GitHub/react-twitter-clone/frontend/src/pages/Login.js"],"names":["React","useState","useRef","axios","Login","props","url","signal","CancelToken","source","account","setAccount","username","password","errors","setErrors","handleChange","e","name","target","value","handleSubmit","preventDefault","console","log","res","post","cancelToken","current","token","status","message","history","push","err","isCancel","cancel"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react'\nimport axios from 'axios'\n\nexport default function Login(props) {\n\n    const url = \"http://localhost:5000/login\";\n\n    const signal = useRef(axios.CancelToken.source());\n\n    let [account, setAccount ] = useState({\n        username: '',\n        password: ''\n    });\n    const [ errors, setErrors ] = useState(null)\n\n    let handleChange = (e) => {\n        let name = e.target.name;\n        let value = e.target.value;\n        account[name] = value;\n        setAccount({ ...account, account });\n    }\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        let { username, password } = account\n\n        console.log(username, password)\n        try {\n            const res = await axios.post(url, {\n                username, password\n            }, { cancelToken: signal.current.token, })\n            console.log(res)\n            if (!res.status) {\n                console.log(res.message)\n                setErrors(res.message)\n                return;\n            }\n            console.log(props)\n            props.history.push('/')\n        } catch (err) {\n            if (axios.isCancel(e)) {\n                console.log('Get request canceled');\n                \n            } else {\n                console.log(err)\n            }\n        }\n        signal.current.cancel('Operation canceled by the user.');\n\n        setAccount({ ...account, username: '', password: '' });\n    }\n\n    return (\n        <div className=\"home col-sm-10 col-md-10 col-lg-5\" >\n            <p>Login</p>\n            <form onSubmit={e => { handleSubmit(e) }}>\n                <input type=\"text\" name=\"username\" value={account.username} onChange={handleChange} placeholder=\"username\" />\n                <input type=\"text\" name=\"password\" value={account.password} onChange={handleChange} placeholder=\"password\" />\n                <p>{errors}</p>\n                <button className=\"btn\">Sign in</button>\n            </form>\n\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}